–ü—Ä–æ–µ–∫—Ç: –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–∞—è –∫–≤–µ—Å—Ç-–∏–≥—Ä–∞ "–•—Ä–æ–Ω–∏–∫–∏ –∂–∏–≤–æ–≥–æ –∑–∞–º–∫–∞".
–ê–†–•–ò–¢–ï–ö–¢–£–†–ê.
–°–µ—Ä–≤–µ—Ä (CastleServer.py): Python (Flask, SocketIO, Eventlet), –∑–∞–ø—É—â–µ–Ω –Ω–∞ Raspberry Pi. –£–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—â–µ–π –ª–æ–≥–∏–∫–æ–π, –∑–≤—É–∫–∞–º–∏, —Ç–∞–π–º–µ—Ä–∞–º–∏, —Å–≤—è–∑—å—é —Å–æ –≤—Å–µ–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º —Ö—Ä–∞–Ω–∏—Ç–µ–ª–µ–º –æ–±—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã. –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (MAIN_BOARD_V5_COM5.ino): Arduino Mega, –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ USB Serial. –°–ª—É–∂–∏—Ç –º–æ—Å—Ç–æ–º –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –±–∞—à–µ–Ω. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –±–∞—à–µ–Ω: –ù–µ—Å–∫–æ–ª—å–∫–æ Arduino, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫ MAIN_BOARD_V5_COM5 –ø–æ Serial (—á–µ—Ä–µ–∑ –ø–æ—Ä—Ç—ã Serial1, Serial2, Serial3, mySerial).
–í–Ω–µ—à–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (ESP32): wolf.ino, train.ino, chest.ino, safe.ino.
–ü–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ Wi-Fi (HTTP POST) —á–µ—Ä–µ–∑ API-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–µ—Ä–≤–µ—Ä–∞
@app.route('/api').
–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - –ø—É–ª—å—Ç (Front.html, scripts.js): HTML/JS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏
–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–≤–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä. –û–±—â–∞–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ SocketIO
(–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ @socketio.on(...)).
–°–¢–ò–õ–¨ –ö–û–î–ê –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø.
–ü–∞—Ç—Ç–µ—Ä–Ω: –ü—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –ª–æ–≥–∏–∫–∏ —Å—Ç–µ–π—Ç-–º–∞—à–∏–Ω—ã (–∫–æ–Ω–µ—á–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∞).
–ó–∞–¥–µ—Ä–∂–∫–∏ (Arduino): –í –∫–æ–¥–µ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏–∑–±–µ–≥–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–±–ª–æ–∫–∏—Ä—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ delay() –≤ –ø–æ–ª—å–∑—É –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö —Ç–∞–π–º–µ—Ä–æ–≤ –Ω–∞ millis()
(–∏—Å–∫–ª—é—á–µ–Ω–∏–µ: OpenAll() –≤ —Ä–µ–∂–∏–º–µ restart –∏ OpenDoor() –¥–ª—è "skip").
–ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–û: –§—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–¥—Ä–µ—Å–Ω—ã—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ (strip.show(),
FastLED.show()) –æ—Ç–∫–ª—é—á–∞—é—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è. –ù–µ –≤—ã–∑—ã–≤–∞—Ç—å –∏—Ö –≤ –∫–∞–∂–¥–æ–º —Ü–∏–∫–ª–µ loop()!
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ (—Ç–∞–π–º–µ—Ä –Ω–∞ millis), –æ–±–Ω–æ–≤–ª—è—è –ª–µ–Ω—Ç—É –Ω–µ —á–∞—â–µ,
—á–µ–º —Ä–∞–∑ –≤ 30-50 –º—Å, –∏–Ω–∞—á–µ Arduino –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å Serial-–∫–æ–º–∞–Ω–¥—ã.
–§–ê–ô–õ–´ –î–õ–Ø –†–ê–ë–û–¢–´.
–Ø –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é —Ç–µ–±–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π
–∑–∞–¥–∞—á–∏, –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–ª–∏ –ø–æ —Ç–≤–æ–µ–º—É –∑–∞–ø—Ä–æ—Å—É.
–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:
scripts.js - —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –ø—É–ª—å—Ç–∞ Front.html ‚Äì –ø—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ,
–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∫–≤–µ—Å—Ç—É –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ —Å—Ç–∞—Ç—É—Å—ã –∏–≥—Ä.
wolf.ino - –≤–Ω–µ—à–Ω—è—è –∏–≥—Ä–∞ —Å –≤–æ–ª–∫–æ–º –≤ –ª–µ—Å—É.
train.ino - –≤–Ω–µ—à–Ω—è—è –∏–≥—Ä–∞ –ø–æ–µ–∑–¥ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ–π.
chest.ino - –≤–Ω–µ—à–Ω—è—è –∏–≥—Ä–∞ —á–µ–º–æ–¥–∞–Ω—ã.
safe.ino - –≤–Ω–µ—à–Ω—è—è –∏–≥—Ä–∞ —Å–µ–π—Ñ —Å –∂–∏–≤–æ—Ç–Ω—ã–º.
basket3.ino - –±–∞—à–Ω—è –±–∞—Å–∫–µ—Ç–±–æ–ª –∏ –ø–µ—â–µ—Ä–∞ —Å —Ç—Ä–æ–ª–ª–µ–º.
workshop.ino - –±–∞—à–Ω—è –ø–ª–æ—Ç–Ω–∏–∫–∞ —Å –≤–µ—Ä—Å—Ç–∞–∫–æ–º –∏ –ø–µ—á—å–∫–æ–π.
owls.ino - –±–∞—à–Ω—è —Å —Å–æ–≤–∞–º–∏ dog.ino - –±–∞—à–Ω—è —Å —Å–æ–±–∞–∫–æ–π.
MAIN_BOARD_V5_COM5.ino - –ø–ª–∞—Ç–∞ –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –∏–≥—Ä—ã: –∑–µ–ª–µ–ª—å–µ
–≤–∞—Ä–µ–Ω–∏–µ —Å –≤–µ–¥—å–º–æ–π, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –±–∞—à–Ω—è —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º, –∫—É–±–∫–æ–º –∏ –ø–æ–¥–≤–∞–ª–æ–º —Å
–∫—Ä–∏—Å—Ç–∞–ª–ª–∞–º–∏, –∫–æ–º–Ω–∞—Ç–∞ –º–æ–∑–≥ (–≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π), –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –±–∞–Ω–∫–∞ —Å —Å–µ–π—Ñ–æ–º, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞
(–∞–∫—Ç–æ–≤—ã–π –∑–∞–ª).
CastleServer.py - —Å–µ—Ä–≤–µ—Ä
–ú–û–ò –ñ–ê–†–ì–û–ù–ù–´–ï –°–õ–û–í–ê.
–°–∫–∏–ø–Ω—É–ª: –ù–∞–∂–∞–ª –Ω–∞ –ø—É–ª—å—Ç–µ –≤ –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ —ç—Ç–∞–ø–∞ –∏–≥—Ä—ã.
–ü—Ä–æ–π—Ç–∏ –∏–≥—Ä—É –∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –ª–æ–≥–∏–∫–æ–π –∫–æ–¥–∞ –¥–µ–π—Å—Ç–≤–∏—è.
–ö–∞—Ä—Ç–∞: train.ino (–±–∞—Ä–µ–ª—å–µ—Ñ —Å 4 –≥–µ—Ä–∫–æ–Ω–∞–º–∏).
"–ú–∞–ª—å—á–∏–∫" (Boy): –ì–µ—Ä–∫–æ–Ω boy_in / boy_out (–ø–∏–Ω (7, board1)) –Ω–∞ MAIN_BOARD, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –∏–≥—Ä–æ–π –≤ –±–∞—Å–∫–µ—Ç–±–æ–ª.
"–î–∏—Ä–µ–∫—Ç–æ—Ä"
(Director):–ö–Ω–æ–ø–∫–∞ directorButton –Ω–∞ MAIN_BOARD.
"–°–µ–π—Ñ –≤–±–∞–Ω–∫–µ" (Bank Safe): –õ–æ–≥–∏–∫–∞ Scrolls() (level 9) –Ω–∞ MAIN_BOARD,–∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è 4 –≥–µ—Ä–∫–æ–Ω–∞.
"–¢—Ä–æ–ª–ª—å" (Troll) / "–ü–µ—â–µ—Ä–∞" (Cave): –ò–≥—Ä–∞ –≤ basket3.ino.
"–ü—Ä–∏–∑—Ä–∞–∫" (Ghost): –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞ (—Å—Ç—É–∫ –ø–æ train.ino, wolf.ino –∏ —Ç.–¥.).
"–ü–ª–æ—Ç–Ω–∏–∫"
(Workshop):–ë–∞—à–Ω—è workshop.ino.
"–°–æ–≤—ã" (Owls): –ë–∞—à–Ω—è owls.ino.
üí° –ö–õ–Æ–ß–ï–í–´–ï –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ï
–ü–†–ò–ù–¶–ò–ü–´.
CastleServer.py (–°–µ—Ä–≤–µ—Ä) –ì–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫ serial(): –ü–æ—Ç–æ–∫ serial() ‚Äî —ç—Ç–æ "—Å–µ—Ä–¥—Ü–µ" –∫–≤–µ—Å—Ç–∞. –û–Ω —á–∏—Ç–∞–µ—Ç Serial –æ—Ç Arduino, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É if flag == "..." –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤ serial_write_queue. –≠—Ç–æ—Ç –ø–æ—Ç–æ–∫ —Ç–∞–∫–∂–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–∑–æ–≤ check_story_and_fade_up() –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏.
–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (API –∏ SocketIO): –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ @app.route('/api') (–¥–ª—è ESP32) –∏
@socketio.on('time') (–¥–ª—è –ø—É–ª—å—Ç–∞) –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö.
–û–±—Ä–∞–±–æ—Ç–∫–∞ Serial (Arduino): –í–Ω—É—Ç—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ü–∏–∫–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–Ω–∏–º–∞—Ü–∏—è —Ä–∞–¥—É–≥–∏ –∏–ª–∏ –æ–∂–∏–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞) –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—Å—Ç–∞–≤–ª—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
Serial.available(), —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã 'restart' –∏–ª–∏ 'skip'.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é MonitorSerialBuffer() –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –±—É—Ñ–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏.
–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (–°—Ç—Ä–∞—Ö–æ–≤–∫–∞): –ï—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–º–∞–Ω–¥–∞ –æ—Ç –±–∞—à–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, boy_out) –º–æ–∂–µ—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è, MAIN_BOARD –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ª–æ–≥–∏ –æ—Ç —ç—Ç–æ–π –±–∞—à–Ω–∏ (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å log:) –∏
—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∏—Ö –∫–∞–∫ –Ω–∞ –∫–æ–º–∞–Ω–¥—É.
–ù–∞ –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞–≤–∞–π –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è DEBUG, –∞ –µ—Å–ª–∏ —è –Ω–∞–ø–∏—à—É, —á—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏, —Ç–æ –∑–Ω–∞—á–∏—Ç —É—Ä–æ–≤–Ω—è INFO.

–î–û–ü–û–õ–ù–ï–ù–ò–ï –û–¢ 14.02.2026 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–´ –ò –°–ï–¢–ò)
1. –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –°–ï–¢–ï–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê RASPBERRY PI –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –¥–≤—É–º—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏ Wi-Fi –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –Ω–∞ —Ä–∞–∑–Ω–µ—Å–µ–Ω–Ω—ã—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ—Ä–µ–Ω—Ü–∏–∏:
‚Ä¢	–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å wlan0 (–¢–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ "Castle"):
o	–†–æ–ª—å: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (ESP32).
o	–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω 11-–π –∫–∞–Ω–∞–ª Wi-Fi (2.462 –ì–ì—Ü) –≤ —Ñ–∞–π–ª–µ /etc/hostapd/hostapd.conf.
o	–ú–æ—â–Ω–æ—Å—Ç—å: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω country_code=RU –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ—â–Ω–æ—Å—Ç–∏.
‚Ä¢	–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å wlan1 (–ö–ª–∏–µ–Ω—Ç "ProducED"):
o	–†–æ–ª—å: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≤–Ω–µ—à–Ω–µ–º—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–¥–ª—è Tailscale –∏ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è).
o	–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 1-–º –∫–∞–Ω–∞–ª–µ (–¥–∏–∫—Ç—É–µ—Ç—Å—è –≤–Ω–µ—à–Ω–∏–º —Ä–æ—É—Ç–µ—Ä–æ–º).
‚Ä¢	–†–µ–∑—É–ª—å—Ç–∞—Ç: –†–∞–∑–Ω–æ—Å –∫–∞–Ω–∞–ª–æ–≤ (1 –∏ 11) —É—Å—Ç—Ä–∞–Ω–∏–ª "–≥–ª—É—Ö–æ—Ç—É" –ø—Ä–∏–µ–º–Ω–∏–∫–æ–≤ ESP32, –≤—ã–∑–≤–∞–Ω–Ω—É—é –º–æ—â–Ω—ã–º —Å–∏–≥–Ω–∞–ª–æ–º –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ Raspberry Pi –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö.
2. –°–ò–°–¢–ï–ú–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò OS (RASPBERRY PI)
‚Ä¢	–û—Ç–∫–ª—é—á–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ç–∏:
o	–í crontab -e –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Å–∫—Ä–∏–ø—Ç wifi_rebooter.sh (—Ä–∞–Ω–µ–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É).
o	–ü—Ä–∏—á–∏–Ω–∞: –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –¥–≤—É–º—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ —Å–∫—Ä–∏–ø—Ç –æ—à–∏–±–æ—á–Ω–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–ª –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª —Å–µ—Ç–µ–≤—ã–µ –∞–¥–∞–ø—Ç–µ—Ä—ã, –≤—ã–∑—ã–≤–∞—è —Ä–∞–∑—Ä—ã–≤—ã —Å–≤—è–∑–∏ –∫–∞–∂–¥—ã–µ 45-55 —Å–µ–∫—É–Ω–¥. –ù–ï –í–ö–õ–Æ–ß–ê–¢–¨ –≠–¢–û–¢ –°–ö–†–ò–ü–¢ –ë–ï–ó –ü–û–õ–ù–û–ô –ü–ï–†–ï–†–ê–ë–û–¢–ö–ò –õ–û–ì–ò–ö–ò –ü–†–û–í–ï–†–ö–ò PING.
3. –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï –°–ï–†–í–ï–†–ê (CastleServer.py)
‚Ä¢	–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ç–æ–∫–æ–≤ (CPU Starvation):
o	–í –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª while True —Ñ—É–Ω–∫—Ü–∏–∏ serial() –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ eventlet.sleep(0.1).
o	–ü—Ä–∏—á–∏–Ω–∞: –ë–µ–∑ —ç—Ç–æ–π –ø–∞—É–∑—ã –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Serial-–ø–æ—Ä—Ç–∞ –∑–∞–Ω–∏–º–∞–ª 100% –≤—Ä–µ–º–µ–Ω–∏ —è–¥—Ä–∞, –Ω–µ –¥–∞–≤–∞—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É (Flask) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç ESP32 (–∏–∑-–∑–∞ —á–µ–≥–æ curl –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ "–≤–∏—Å–µ–ª–∏").
‚Ä¢	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è API:
o	–í —Ñ—É–Ω–∫—Ü–∏—é before_request –¥–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ: if request.path.startswith('/api'): return None.
o	–ü—Ä–∏—á–∏–Ω–∞: –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ESP32 –Ω–µ —É–º–µ—é—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –ø—Ä–æ—Ü–µ–¥—É—Ä—É –ª–æ–≥–∏–Ω–∞. –†–∞–Ω–µ–µ —Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–ª –∏—Ö POST-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ /login (–∫–æ–¥ 302), –∏–∑-–∑–∞ —á–µ–≥–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç –∏–≥—Ä –Ω–µ –¥–æ—Ö–æ–¥–∏–ª–∏. –¢–µ–ø–µ—Ä—å API –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.
4. –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ü–†–û–®–ò–í–ö–ê–• ESP32 (Safe, Chest, Wolf, Train)
‚Ä¢	–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:
o	–ú–µ—Ç–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Wi-Fi –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ –ø–æ–ª–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: WiFi.config(local_IP, gateway, subnet); –ì–¥–µ gateway ‚Äî —ç—Ç–æ IP –∞–¥—Ä–µ—Å Raspberry Pi (192.168.4.1), –∞ subnet ‚Äî 255.255.255.0.
o	–ü—Ä–∏—á–∏–Ω–∞: –ë–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —à–ª—é–∑–∞ ESP32 –º–æ–≥–ª–∞ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–∞–∫–µ—Ç—ã, –Ω–æ –Ω–µ –º–æ–≥–ª–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç (TCP ACK –∏–ª–∏ POST-–∑–∞–ø—Ä–æ—Å) –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
o	–í setup() –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ sendLogToServer(...) —Å JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π {"log": "ESP32 [Name] is ready..."}.
o	–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ (castle.log).

–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢.
–¢–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã: –û–ø—Ä–µ–¥–µ–ª–∏ –∫–æ—Ä–Ω–µ–≤—É—é –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏ –∏–ª–∏ –æ–ø–∏—à–∏ –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å –≥–æ—Ç–æ–≤—ã–µ –∫ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—é, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∫–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, —á—Ç–æ–±—ã —è –º–æ–≥ –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –∏ –ø–æ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ): –í —á–µ–º –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞ –∏–ª–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞. –ü–æ—á–µ–º—É –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–∞—Ç –ø—Ä–æ–±–ª–µ–º—É –∏–ª–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ç—Ä–µ–±—É–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª. –£–∫–∞–∂–∏, –∫–∞–∫–∏–µ –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
–ù–µ —É–∫–∞–∑—ã–≤–∞–π –¥–ª—è –º–µ–Ω—è —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –≤ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ç–æ–±–æ–π –∫–æ–¥–∞—Ö.
 
–ö–û–ù–ö–†–ï–¢–ù–ê–Ø –ó–ê–î–ê–ß–ê.

